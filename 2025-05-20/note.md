# MPI 学习笔记

## 学习内容

- 进一步学习了 MPI，尝试了多种通信函数。
- 理解了死锁的成因与避免。
- 掌握了异步（非阻塞）通信的使用。
- 初步接触 Python MPI 接口 mpi4py。

---

## 常用 MPI 函数及功能

### 点对点通信函数

- **MPI_Send**  
  发送消息，调用后阻塞直到消息被接收或缓冲。

- **MPI_Recv**  
  接收消息，阻塞等待直到收到数据。

- **MPI_Isend**  
  异步发送，立即返回，通信在后台进行。

- **MPI_Irecv**  
  异步接收，立即返回，等待消息在后台处理。

- **MPI_Wait**  
  等待异步通信完成，确保数据传输结束。

- **MPI_Test**  
  检查异步通信是否完成，非阻塞。

### 集体通信函数

- **MPI_Bcast**  
  一个进程将数据广播给所有其他进程。

- **MPI_Reduce**  
  所有进程将数据按某种操作（如求和）归约到一个进程。

- **MPI_Allreduce**  
  归约操作后结果广播给所有进程。

- **MPI_Barrier**  
  所有进程等待，直到全部达到屏障点。

- **MPI_Scatter**  
  一个进程将数据分散发送给各个进程。

- **MPI_Gather**  
  各进程将数据收集到一个进程。

---

## 死锁理解

- 死锁产生于进程间相互等待对方通信完成，导致程序无法继续运行。

- 避免方法：  
  - 使用非阻塞通信配合 `MPI_Wait`，避免长时间阻塞。  
  - 设计合理的通信顺序，避免循环等待。  
  - 采用集体通信，减少复杂点对点通信导致的死锁风险。

---

## Python MPI（mpi4py）总结

- `mpi4py` 是 Python 的 MPI 接口库，支持点对点和集体通信。

- 优点：  
  - 语法简洁，易于编写和调试并行程序。  
  - 支持阻塞和非阻塞通信。  
  - 可以直接传递 Python 对象，使用更灵活。

- 适合快速开发和测试 MPI 程序，方便进行并行计算实验。

---
